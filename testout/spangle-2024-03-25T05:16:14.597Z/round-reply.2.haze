fun m, a ->
    case m, a
      | (buffer, todos), AddTodo => (buffer, add(todos))
      | (buffer, todos), RemoveTodo(idx) => (buffer, remove(idx, todos))
      | (buffer, todos), ToggleTodo(idx) => (buffer, toggle(idx, todos))
      | (_, todos), UpdateBuffer(text) => (text, todos)
    end