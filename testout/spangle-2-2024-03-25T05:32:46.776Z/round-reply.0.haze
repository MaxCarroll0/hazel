fun model, action ->
   case action
   | Init => init_model()
   | Load(data) => { model with data = data; is_loading = false }
   | Error(error) => { model with error = Some(error); is_loading = false; is_loaded = false }
   | Search(query) => { model with current_query = query }
   | Sort(field) => { model with sorting_field = field; is_ascending = not model.is_ascending } 
   | _ => model end