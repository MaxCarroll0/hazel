
fun (model, action) ->
  case action
  | AddTodo => (let todos = add(model) in ("", todos))
  | RemoveTodo(index) => (let (buffer, todos) = model in (buffer, remove(index, todos)))
  | ToggleTodo(index) => (let (buffer, todos) = model in (buffer, toggle(index, todos)))
  | UpdateBuffer(new_buffer) => (new_buffer, snd(model))
  end