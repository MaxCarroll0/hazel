fun model, action ->
    let (buffer,todos) = model in
    case action
      | AddTodo => (string_trim(""), add(model))
      | RemoveTodo(id) => (buffer, remove(id, todos))
      | ToggleTodo(id) => (buffer, toggle(id, todos))
      | UpdateBuffer(text) => (text, todos)
    end