fun model, action ->
  case action
    | AddTodo => 
        let newTodo = string_trim(Model.buffer(model)) in 
        let newTodos = if newTodo != "" 
                       then add(model)
                       else Model.todos(model) 
        in (newTodo, newTodos)
    | RemoveTodo(i) => (Model.buffer(model), remove(i, Model.todos(model)))
    | ToggleTodo(i) => (Model.buffer(model), toggle(i, Model.todos(model)))
    | UpdateBuffer(str) => (str, Model.todos(model))
  end