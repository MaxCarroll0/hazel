fun model, action ->
case action
| AddTodo =>
let new_todo = String.trim(model.buffer) in
if new_todo != "" then
let todo = (new_todo, false) in
Model.buffer.set("", add(todo, model.todos))
end else model
| RemoveTodo(idx) => Model.todos.set(remove(model.todos, idx)) 
| ToggleTodo(idx) => Model.todos.set(toggle(model.todos, idx))
| UpdateBuffer(content) => Model.buffer.set(content)
end
