
fun model, action ->
  case action
  | Toggle(i) => Model(toggle(i, model.todos), model.input, model.uid)
  | Remove(i) => Model(remove(i, model.todos), model.input, model.uid)
  | Add => Model(add(model), model.input, model.uid + 1)
  | Change(str) => Model(string_sub(str, 0, String.length(str)), model.uid)
  | Clear => Model(string_trim(model.input), model.uid)
  end