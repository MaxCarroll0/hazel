
fun m, a ->
  case a
  | ChangeBrush(b) => {m with brush=b}
  | ToggleGrid => {m with grid=not(m.grid)}
  | Paint(sq) =>
      let new_board = update_board(m.board, sq) in
      {m with board=new_board}
  | Clear => {m with board = empty_board()}
  end